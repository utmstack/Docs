---
title: UTMStack v11 Update Guide
sidebarTitle: "Update Guide"
description: "Keep your UTMStack v11 installation up to date with the latest features, security patches, and performance improvements."
---

<Warning>
**Important Notice for v10 Users**: 

UTMStack v11 is **NOT compatible** with v10. Direct upgrades from v10 are not supported. If you're running v10, please refer to the migration guide when it becomes available, or contact UTMStack support.

This update guide is **only for updating within v11 versions** (e.g., from v11.0.0 to v11.0.1).
</Warning>

## Overview

Keeping your UTMStack software up to date is essential for:
- Maintaining system security
- Ensuring optimal performance
- Accessing the latest features and improvements
- Receiving bug fixes and stability enhancements

<Tip> 
The Main Server (Manager) is the central component of UTMStack v11 and is responsible for managing security operations, data collection, and coordinating with worker nodes.
</Tip>

---

## Automatic Updates (Recommended)

UTMStack v11 introduces centralized update management. If your instance is connected to a central server, you can schedule automatic updates.

### Enabling Automatic Updates

1. Navigate to **Settings** > **System** > **Updates**
2. Enable automatic updates
3. Configure your preferred update schedule
4. Set maintenance window for minimal disruption

<Info>
Automatic updates will be applied during your configured maintenance window. The system will automatically restart services as needed.
</Info>

---

## Manual Update Process

For offline installations or when manual updates are preferred:

### Step 1: Prepare for Update

```bash
# Update packages list
sudo apt update

# Check current UTMStack version
docker ps | grep utmstack
```

<Note>
**Before proceeding**: Back up your configuration file located at `/root/utmstack.yml`
</Note>

### Step 2: Download Latest Installer

```bash
# Download the latest version of the installer
wget http://github.com/utmstack/UTMStack/releases/latest/download/installer
```

### Step 3: Set Permissions

```bash
# Change to root user
sudo su

# Set execution permissions
chmod +x installer
```

### Step 4: Run the Installer

```bash
# Execute the installer
./installer
```

<Info>
The installer will automatically detect your existing installation and perform an in-place update.
</Info>

### Step 5: Verify Update

After the update completes:

```bash
# Check container status
docker ps

# Verify all services are healthy
docker service ls

# Check logs for any errors
docker logs utmstack_backend
```

---

## Update Validation

After updating, perform these checks:

<Steps>
  <Step title="Access Web Interface">
    Navigate to your UTMStack URL and verify you can log in:
    ```
    https://your-server-ip
    ```
  </Step>
  
  <Step title="Check Version">
    Go to **Settings** > **About** to confirm the new version number
  </Step>
  
  <Step title="Verify Data Sources">
    Ensure all your data sources are still connected and receiving logs
  </Step>
  
  <Step title="Test Core Functions">
    - Check dashboards load correctly
    - Verify alerts are being generated
    - Test log search functionality
  </Step>
</Steps>

---

## Updating Worker Nodes

If you have a multi-node deployment with worker nodes:

1. **Update the manager node first** (steps above)
2. **Update each worker node** individually:

```bash
# On each worker node
sudo su
wget http://github.com/utmstack/UTMStack/releases/latest/download/installer
chmod +x installer
./installer
```

<Warning>
Update worker nodes one at a time to maintain system availability during the update process.
</Warning>

---

## Rollback Procedure

If you encounter issues after updating:

```bash
# Stop all services
docker service scale utmstack_backend=0

# Restore from backup (if available)
# Contact support for assistance with rollback
```

<Note>
Always create a backup before updating. Rollback procedures may vary depending on your deployment configuration.
</Note>

---

## Update Schedule Recommendations

<CardGroup cols={2}>
  <Card title="Security Updates" icon="shield">
    Apply immediately when released
  </Card>
  <Card title="Feature Updates" icon="star">
    Review release notes, schedule during maintenance window
  </Card>
  <Card title="Patch Updates" icon="wrench">
    Apply weekly or bi-weekly
  </Card>
  <Card title="Major Versions" icon="rocket">
    Plan carefully, test in staging environment first
  </Card>
</CardGroup>

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="Update fails with 'Permission denied'" icon="lock">
    Ensure you're running as root user:
    ```bash
    sudo su
    chmod +x installer
    ```
  </Accordion>
  
  <Accordion title="Services don't restart after update" icon="rotate">
    Manually restart Docker services:
    ```bash
    systemctl restart docker
    docker service ls
    ```
  </Accordion>
  
  <Accordion title="Cannot download installer" icon="download">
    Check internet connectivity and firewall rules:
    ```bash
    curl -I https://github.com
    ```
  </Accordion>
  
  <Accordion title="Data sources disconnected after update" icon="plug">
    1. Check agent connectivity
    2. Verify firewall rules still allow required ports
    3. Restart affected agents if needed
  </Accordion>
</AccordionGroup>

---

## Best Practices

<Check>
- **Always back up** before updating
- **Test updates** in a staging environment when possible
- **Update during maintenance windows** to minimize disruption
- **Monitor logs** during and after the update
- **Document** any custom configurations before updating
- **Keep workers synchronized** with the manager version
</Check>

---

## Getting Help

If you encounter issues during the update:

<CardGroup cols={2}>
  <Card title="Documentation" icon="book" href="https://documentation.utmstack.com/v11/introduction">
    Search our knowledge base
  </Card>
  <Card title="Support" icon="headset" href="https://support.threatwinds.com/">
    Contact technical support
  </Card>
  <Card title="Community" icon="users" href="https://github.com/utmstack/UTMStack/discussions">
    Ask the community
  </Card>
  <Card title="Release Notes" icon="note" href="https://github.com/utmstack/UTMStack/releases">
    Review what's new
  </Card>
</CardGroup>
