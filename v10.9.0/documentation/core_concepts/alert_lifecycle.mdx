# Alert Lifecycle

## Overview

Understanding the alert lifecycle is crucial for effective incident management within UTMStack. This document provides an overview of how alerts are generated, processed, and resolved in UTMStack version v10.9.0. It covers the core concepts related to alert management, including status changes, incident conversion, and alert tagging.

## Alert Management

### Alert Status Changes

Alerts in UTMStack can undergo various status changes, which are crucial for tracking the lifecycle of an alert. The `AlertIncidentStatusChangeDTO` schema defines the required properties for changing the status of an alert:

- **incidentId**: Integer identifier for the incident.
- **alertIds**: Array of strings representing alert identifiers.
- **status**: Integer representing the new status of the alert.

The possible status labels include:
- PENDING
- RUNNING
- EXECUTED
- ERROR

### Updating Alert Status

To update the status of alerts, UTMStack provides an API endpoint `/api/utm-alerts/status`. This endpoint accepts a JSON request body defined by the `UpdateAlertStatusRequestBody` schema, which includes:

- **alertIds**: Array of alert identifiers.
- **statusObservation**: A string for additional status observations.
- **status**: Integer representing the new status.

### Alert Tagging

UTMStack allows for the tagging of alerts to facilitate better organization and management. The `UpdateAlertTagsRequestBody` schema specifies the required fields for updating alert tags:

- **alertIds**: Array of alert identifiers.
- **tags**: Array of strings representing the tags to be applied.
- **createRule**: Boolean indicating whether to create a rule based on the tags.

The API endpoint `/api/utm-alerts/tags` is used to update alert tags and responds with a 200 OK status upon successful execution.

## Incident Conversion

Alerts can be converted into incidents for more detailed investigation and resolution. The `ConvertToIncidentRequestBody` schema outlines the necessary fields for this conversion:

- **eventIds**: Array of event identifiers.
- **incidentId**: Integer identifier for the incident.
- **incidentName**: Name of the incident.
- **incidentSource**: Source of the incident.

The conversion process is handled via the `/api/utm-alerts/convert-to-incident` endpoint.

## Alert Response Rules

UTMStack supports the execution of alert response rules, which are defined by the `UtmAlertResponseRuleExecution` schema. This includes:

- **agent**: The agent responsible for executing the rule.
- **alertId**: Identifier of the alert.
- **command**: Command to be executed.
- **executionDate**: Date and time of execution.
- **executionStatus**: Status of the execution, which can be EXECUTED, PENDING, or FAILED.
- **nonExecutionCause**: Reason for non-execution, such as AGENT_OFFLINE or AGENT_NOT_FOUND.

## Summary

This document provides an overview of the alert lifecycle in UTMStack, focusing on the processes of status changes, tagging, and incident conversion. Understanding these components is essential for effective alert management and incident response within the UTMStack environment.

For further details on API schemas and endpoints, refer to the [API documentation](https://documentation.utmstack.com/v10/configuration/data_retention).
