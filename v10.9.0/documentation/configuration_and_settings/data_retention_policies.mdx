# Data Retention Policies

## Introduction

This guide provides detailed instructions on configuring data retention and archival policies within UTMStack version 10.9.0. It covers essential features such as index rollover, snapshot archiving, and the management of hot and cold storage to ensure compliance with regulations and optimize system performance.

## Index Rollover

Index rollover in UTMStack helps manage data efficiently by automatically deleting indices that meet certain conditions, such as data size or age. This feature is crucial for maintaining optimal storage space and system performance.

### How to Configure Index Rollover

1. Navigate to `Application Management` &gt; `Data Retention`.
2. Set the desired retention period in days.
3. Click ‘Save’ to confirm your changes.

**Key Features**:
- **Delete Days**: Define the duration for which data is retained. After this period, data is flagged for deletion.
- **Automatic Action**: The system acts automatically when disk usage reaches 85% to prevent performance issues.

## Snapshot Archiving

Snapshot archiving is a critical feature for long-term data retention. It allows for the storage of data snapshots, which can be configured for remote storage and supports secure data restoration using Cerebro.

### Understanding Hot and Cold Storage

- **Hot Storage**: Used for actively accessed data, designed for real-time access.
- **Cold Storage**: Used for archived data, essential for audits, compliance, or retrospective analysis.

### Configuring Snapshot Path in Linux

To configure the snapshot path for remote storage:

1. **Mount the Remote Drive or Different Drive**:

   ```bash
sudo mount -t nfs REMOTE-SERVER:/remote/path /utmstack/opensearch/backups
   ```

   Replace `REMOTE-SERVER:/remote/path` with your actual server and path details.

2. **Add to `/etc/fstab` for Persistence**:
   - Add the mount details to ensure the remote drive remains mounted after system reboots.

3. **Test the Configuration**:

   ```bash
sudo mount -a
   ```

## Restoring Data Using Cerebro

To restore data using Cerebro, ensure secure communication with OpenSearch by temporarily opening necessary ports.

### Opening and Closing Ports

- **Open Port 9200**:

  ```bash
docker service update --publish-add 9200:9200 utmstack_node1
  ```

- **Close Port 9200**:

  ```bash
docker service update --publish-rm 9200:9200 utmstack_node1
  ```

Ensure to close the port after restoration to minimize security risks.

## Summary

This documentation provides an overview of configuring data retention policies in UTMStack, focusing on index rollover, snapshot archiving, and the management of hot and cold storage. These features are designed to optimize log storage, ensure compliance with regulations, and maintain system performance. For more information, visit the [UTMStack Data Retention Documentation](https://documentation.utmstack.com/v10/configuration/data_retention).
